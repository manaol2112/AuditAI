{% extends 'base/base-requestor.html' %} 
{% load static %} 
{% block content %}

<link rel="stylesheet" href="{% static 'css/tables.css' %}" />

<div class="card" style="height:90vh">
    <div class="card-body">
        <nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb">
            <ol class="breadcrumb" style="font-size:14px;">
              <li class="breadcrumb-item"><i class="fa-solid fa-house"></i></a></li>
              <li class="breadcrumb-item"><a href="{% url 'appAUDITAI:access-request-home'%}" style="text-decoration:none;color:#474b4d">Home</i></a></li>
              <li class="breadcrumb-item active" style="text-decoration:underline;color:#474b4d">My Requests</a></li>
            </ol>
        </nav>

        <nav class="navbar bg-body-tertiary" data-bs-theme="light" style="margin-bottom: 15px;margin-top:30px;;">
            <div class="container-fluid">
                <div class="row">
                    <a style="font-size:25px;"><span class="fas fa-solid fa-user"
                            style="margin-right: 10px;color:#474b4d"></span>Access Request Dashboard</a>
                </div>
                <form class="d-flex" role="search">
                    <input id="searchAPP" class="form-control me-2" type="search" onkeyup="filterApps()"
                        placeholder="Search Requests..." autocomplete="off" aria-label="Search"
                        style="height:35px;font-size:13px;">
                    <button type="button" class="btn btn-outline-secondary" aria-expanded="false"
                        style="height:35px;margin-right:3px;">
                        <i class="fas fa-search"></i>
                    </button>
                </form>
            </div>
        </nav>

        <div style="border-bottom:solid;border-color:lightgray" style="font-size:13px">
            <p style="font-size:13px">Manage, create, and view access related requests </p>
        </div>
        <div class="card" style="margin-top:20px;">
            <div class="card-body">
                <button type="button" style="margin-bottom:20px;" class="btn btn-primary btn-sm">New Request</button>
                <table id="app_user_list" name="app_user_list" class="table table-hover table-sm nowrap"
                style="margin-top:50px;width: 100%;word-wrap:break-word;font-family:sans-serif;margin-top:20px;">
                <thead style="padding-top:12px;text-align:center">
                    <tr
                        style="font-size:12px; background-color:whitesmoke;max-width: 150px;overflow:hidden;white-space: nowrap;text-overflow: ellipsis;">
                        <th style="text-align:left;">Reference</th>
                        <th style="text-align:left;">Title</th>
                        <th style="text-align:left;">Date Created</th>
                        <th style="text-align:left;">Status</th>
                        <th style="text-align:left;"></th>
                    </tr>
                </thead>
                <tbody style="font-size:13px">
                    {% for user in app_users %}
                    <tr style="vertical-align: middle;">
                        <td><i class="far fa-user" style="margin-right:5px;color:lightblue"></i>{{ user.USER_ID }}</td>
                        <td><i class="far fa-envelope" style="margin-right:5px;color:lightblue"></i>
                            {{user.EMAIL_ADDRESS }}</td>
                        {% if user.STATUS|lower == 'active' %}
                        <td><span class="badge bg-success rounded-pill text-bg-success" style="font-size:10px;">
                                {{user.STATUS }}</span></td>
                        {% else %}
                        <td><span class="badge bg-secondary rounded-pill text-bg-secondary" style="font-size:10px;">
                                {{user.STATUS }}</span></td>
                        {% endif %}
                        <td class="text-end">
                            <a href="{% url 'appAUDITAI:appdetails-view-user-record' comp_id selected_app.id user.USER_ID %}"
                                data-process-id="{{user.USER_ID}}" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip"
                                data-placement="top" title="View Record">
                                <i class="fa-solid fa-arrows-to-dot"></i>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            </div>
        </div>
        
    </div>
</div>

{% endblock content %}
